# Project: adams
# Date: 2014-01-23 15:43:00
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	This flow demonstrates how to build, prime and use\na forecaster to generate some future predictions.\nThe priming and forecasting data are displayed in the\nsame timeseries display actor.\nBased on the following example:\nhttp://wiki.pentaho.com/display/DATAMINING/Time+Series+Analysis+and+Forecasting+with+Weka
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.source.WekaForecasterSetup
					-name
					setup
					-generator
						adams.flow.source.wekaforecastersetup.WekaForecasterGenerator
							-classifier
								weka.classifiers.functions.GaussianProcesses
									-L
									1.0
									-N
									0
									-K
									weka.classifiers.functions.supportVector.PolyKernel -C 250007 -E 1.0
							-forecast-fields
							Fortified,Dry-white
							-lag-maker
								adams.flow.core.LagMakerOptions
									-adjust-for-trends
									true
									-time-stamp-field
									Date
									-month-of-year
									true
									-quarter
									true
			-actor
				adams.flow.source.StorageValue
					-name
					model
					-storage-name
					model
			-actor
				adams.flow.source.SequenceSource
					-name
					data
					-actor
						adams.flow.source.FileSupplier
							-file
							${EXAMPLE_FLOWS}/data/wine.arff
					-actor
						adams.flow.transformer.WekaFileReader
							-loader
								weka.core.converters.ArffLoader
			-actor
				adams.flow.sink.TimeseriesDisplay
					-writer
						adams.gui.print.NullWriter
					-axis-x
						adams.gui.visualization.core.AxisPanelOptions
							-label
							date
							-tick-generator
								adams.gui.visualization.core.axis.PeriodicityTickGenerator
							-nth-value
							2
							-width
							40
					-axis-y
						adams.gui.visualization.core.AxisPanelOptions
							-label
							sales
							-tick-generator
								adams.gui.visualization.core.axis.FancyTickGenerator
							-nth-value
							1
							-width
							60
							-custom-format
							0
					-periodicity
					YEARLY
					-color-provider
						adams.gui.visualization.core.CustomColorProvider
							-color
							#0000ff
							-color
							#ff0000
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			train
			-tee
				adams.flow.source.CallableSource
					-callable
					data
			-tee
				adams.flow.transformer.WekaTrainForecaster
					-forecaster
					setup
					-store-transformed
					true
			-tee
				adams.flow.control.ContainerValuePicker
					-tee
						adams.flow.sink.WekaInstancesDisplay
							-x
							-3
							-y
							-3
							-writer
								adams.gui.print.NullWriter
					-value
					Transformed
			-tee
				adams.flow.transformer.SetStorageValue
					-storage-name
					model
	-actor
		adams.flow.control.Trigger
			-name
			prime
			-tee
				adams.flow.source.CallableSource
					-callable
					data
			-tee
				adams.flow.control.Tee
					-name
					plot data
					-tee
						adams.flow.transformer.Convert
							-conversion
								adams.data.conversion.WekaInstancesToTimeseries
									-date-attribute
									Date
									-value-attribute
									Fortified
					-tee
						adams.flow.transformer.SetID
							-id
							Fortified-Priming
					-tee
						adams.flow.control.Cast
							-classname
							adams.data.timeseries.Timeseries
					-tee
						adams.flow.sink.CallableSink
							-callable
							TimeseriesDisplay
			-tee
				adams.flow.transformer.WekaPrimeForecaster
					-forecaster
					model
			-tee
				adams.flow.transformer.SetStorageValue
					-storage-name
					model
	-actor
		adams.flow.control.Trigger
			-name
			forecast
			-tee
				adams.flow.source.WekaForecasting
					-model-actor
					model
					-on-the-fly
					true
					-num-steps
					36
			-tee
				adams.flow.transformer.Convert
					-conversion
						adams.data.conversion.WekaForecastContainerToTimeseries
							-start
							1995-08-01 00:00:00
							-interval
							START +1 MONTH
			-tee
				adams.flow.transformer.SetID
					-id
					Fortified-Forecast
			-tee
				adams.flow.control.Cast
					-classname
					adams.data.timeseries.Timeseries
			-tee
				adams.flow.sink.CallableSink
					-callable
					TimeseriesDisplay
	-flow-execution-listener
		adams.flow.execution.NullListener

