# Project: adams
# Date: 2015-01-19 14:18:57
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	After querying the user for text to encode, the\nflow draws a QRCode on an empty image, rotates it\nand then extracts the data from the code again.
	-actor
		adams.flow.standalone.GridView
			-width
			500
			-height
			800
			-x
			-3
			-actor
				adams.flow.sink.Display
					-name
					Encoded
					-writer
						adams.data.io.output.NullWriter
			-actor
				adams.flow.sink.Display
					-name
					Decoded
					-writer
						adams.data.io.output.NullWriter
			-actor
				adams.flow.sink.ReportDisplay
					-name
					Meta-data
					-width
					600
					-x
					-3
			-num-rows
			3
			-writer
				adams.gui.print.NullWriter
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.sink.DisplayPanelManager
					-provider
						adams.flow.sink.ImageViewer
							-writer
								adams.gui.print.NullWriter
							-zoom
							-1.0
							-selection-processor
								adams.gui.visualization.image.selection.NullProcessor
							-image-overlay
								adams.gui.visualization.image.NullOverlay
					-entry-name-variable
					name
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			query user
			-tee
				adams.flow.source.EnterValue
					-message
					Please enter value to encode in QRCode
					-initial-value
					foobar
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					content
	-actor
		adams.flow.control.Trigger
			-name
			output content
			-tee
				adams.flow.source.Variable
					-var-name
					content
			-tee
				adams.flow.transformer.StringInsert
					-position
					first
					-value
					user input: 
			-tee
				adams.flow.sink.CallableSink
					-callable
					Encoded
	-actor
		adams.flow.control.Trigger
			-name
			encode/decode
			-tee
				adams.flow.source.NewImage
					-width
					500
					-height
					500
					-conversion
						adams.data.conversion.BufferedImageToBufferedImage
			-tee
				adams.flow.transformer.Draw
					-operation
						adams.flow.transformer.draw.Barcode
							-encoder
								adams.data.barcode.encode.QRCode
									-width
									500
									-height
									500
									-text
									@{content}
					-no-copy
					true
			-tee
				adams.flow.control.Tee
					-name
					original
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							name
							-var-value
							original
					-tee
						adams.flow.sink.CallableSink
							-callable
							DisplayPanelManager
			-tee
				adams.flow.transformer.BufferedImageTransformer
					-transformer
						adams.data.jai.transformer.Rotate
							-angle
							30.0
			-tee
				adams.flow.control.Tee
					-name
					rotated
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							name
							-var-value
							rotated
					-tee
						adams.flow.sink.CallableSink
							-callable
							DisplayPanelManager
			-tee
				adams.flow.transformer.DecodeBarcode
			-tee
				adams.flow.control.Tee
					-name
					content
					-tee
						adams.flow.transformer.Convert
							-conversion
								adams.data.conversion.TextContainerToString
					-tee
						adams.flow.transformer.StringInsert
							-position
							first
							-value
							decoded: 
					-tee
						adams.flow.sink.CallableSink
							-callable
							Decoded
			-tee
				adams.flow.control.Tee
					-name
					meta-data
					-tee
						adams.flow.sink.CallableSink
							-callable
							Meta-data
	-flow-execution-listener
		adams.flow.execution.NullListener

