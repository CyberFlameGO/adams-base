# Project: adams
# Date: 2014-12-24 09:35:41
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	Processes one or more image, apply the resizing and blurring operations.
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.sink.DisplayPanelManager
					-width
					740
					-x
					-3
					-provider
						adams.flow.sink.ImageViewer
							-x
							-3
							-writer
								adams.gui.print.NullWriter
							-selection-processor
								adams.gui.visualization.image.selection.NullProcessor
							-image-overlay
								adams.gui.visualization.image.NullOverlay
					-entry-name-variable
					name
	-actor
		adams.flow.source.SelectFile
			-stop-if-canceled
			true
			-initial-dir
			${EXAMPLE_FLOWS}/data
	-actor
		adams.flow.control.Tee
			-name
			original
			-tee
				adams.flow.transformer.ImageReader
					-reader
						adams.data.io.input.JAIImageReader
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					name
					-var-value
					original
			-tee
				adams.flow.sink.CallableSink
					-callable
					DisplayPanelManager
	-actor
		adams.flow.control.Tee
			-name
			output filename
			-tee
				adams.flow.transformer.BaseName
			-tee
				adams.flow.transformer.PrependDir
					-prefix
					${EXAMPLE_FLOWS}/output
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					outfile
	-actor
		adams.flow.control.Tee
			-name
			temp filename
			-tee
				adams.flow.transformer.BaseName
			-tee
				adams.flow.transformer.PrependDir
					-prefix
					${TMP}
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					tmpfile
	-actor
		adams.flow.transformer.ImageMagickOperation
			-name
			resize
			-operation
				adams.data.imagemagick.im.AdaptiveResize
					-width
					400
			-output
			@{tmpfile}
	-actor
		adams.flow.transformer.ImageMagickOperation
			-name
			blur
			-operation
				adams.data.imagemagick.im.AdaptiveBlur
			-output
			@{outfile}
	-actor
		adams.flow.control.Tee
			-name
			processed
			-tee
				adams.flow.transformer.ImageReader
					-reader
						adams.data.io.input.JAIImageReader
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					name
					-var-value
					processed
			-tee
				adams.flow.sink.CallableSink
					-callable
					DisplayPanelManager
	-actor
		adams.flow.sink.Display
			-writer
				adams.data.io.output.NullWriter
	-flow-execution-listener
		adams.flow.execution.NullListener

